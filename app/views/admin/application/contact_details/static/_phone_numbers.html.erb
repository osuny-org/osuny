<%
depth ||= 0
indentation = '  ' * depth
%>
<%= indentation %>phone_numbers:
<%
if about.respond_to?(:phone_numbers) %>
<%= indentation %>  list:
<%
about.phone_numbers.each do |phone_number|
  next if phone_number.blank?
  detail = ContactDetails::Phone.new phone_number
  %>
<%= indentation %>    - label: >-
<%= indentation %>        <%= detail.label %>
<%= indentation %>      value: >-
<%= indentation %>        <%= detail.value %>
<% end %>
<% end %>
<%
ContactDetails::PHONES.each do |attribute|
  if about.respond_to?(attribute)
    # If the publicity level is defined, we must respect it
    publicity = "#{attribute}_is_public?"
    should_show = about.respond_to?(publicity) ? about.public_send(publicity) : true
    if should_show
      data = about.public_send(attribute)
      detail = ContactDetails::Phone.new data
      %>
<%= render 'admin/application/contact_details/static/single',
            attribute: attribute,
            detail: detail,
            depth: depth+1 %>
<%
    end
  end
end
%>