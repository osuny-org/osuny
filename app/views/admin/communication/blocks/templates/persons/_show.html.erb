<% heading_level = block.heading_rank_children %>

<div class="<%= block_html_class(block) %>">
  <div class="container">
    <div class="block-content">
      <%= render 'admin/communication/blocks/partials/top', block: block %>

      <div class="persons">
        <% block.template.selected_elements.each do |element|
          person = element.person
          next if person.nil?
          %>
          <article class="person" itemscope itemtype="https://schema.org/Person">
            <div class="description">
              <h<%= heading_level %>>
                <% if block.template.with_link %>
                  <%= link_to person, [:admin, person] %>
                <% else %>
                  <%= element.person %>
                <% end %>
              </h<%= heading_level %>>
              <p itemprop="jobTitle">
                <%= element.role %>
              </p>
            </div>
            <% if block.template.with_photo %>
              <div class="avatar" itemprop="image">
                <% if person.best_picture.attached? %>
                  <%= kamifusen_tag person.best_picture, class: 'img-fluid rounded-circle' %>
                <% end %>
              </div>
            <% end %>
          </article>
        <% end %>
      </div>

    </div>
  </div>
</div>
