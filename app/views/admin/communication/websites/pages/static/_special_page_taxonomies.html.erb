<%
if page.special_page_categories
  categories = page.special_page_categories
  taxonomies = categories.taxonomies.ordered
  # TODO do a scope to simplify that
  free_categories_ids = []
  categories.each do |category|
    free_categories_ids << category.id unless category.in_taxonomy?
  end
  free_categories = categories.where(id: free_categories_ids)
  %>
special_page_taxonomies:
  - name: "<%= t('category.title') %>"
    slug: ""
    categories:
<% free_categories.ordered.each do |category| %>
<%= render 'admin/application/categories/category_static',
            category: category,
            language: language %><%
  end
  if taxonomies.any?
    taxonomies.ordered.each do |taxonomy|
      taxonomy_l10n = taxonomy.localization_for(language)
      next if taxonomy_l10n.nil?
      hugo = taxonomy_l10n.hugo(@website)
      %>
  - name: "<%= prepare_text_for_static taxonomy_l10n.to_s %>"
    slug: "<%= hugo.slug %>"
    categories:
<%    categories.in_taxonomy(taxonomy).ordered.each do |category| %>
<%= render 'admin/application/categories/category_static',
            category: category,
            language: language %><%
      end 
    end
  end
end %>